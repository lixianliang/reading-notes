
## 旁路缓存
    读更新

1. 写策略
    更新数据库中记录；然后删除缓存

1. 读策略
    从缓存中读取数据
    如果缓存命中，则直接返回数据；如果缓存不命中，则从数据库总查询数据
    查询数据后，将数据写入到缓存中并且返回给用户

1. 理论上还是可能出现数据不一致，通过key过期来处理；或者通过分布式锁来处理
    A读取缓存没有数据从数据库load，然后B写入数据库并删除数据；然后B写入缓存；实际很难出现因为缓存的操作和读取快于B写入

    1. 更新数据库时同时更新缓存，在更新缓存前先加一个分布式锁，对写入有性能有一些问题
    1. 另一种做法同样也是在更新数据时更新缓存，只是给缓存加一个较短的过期时间
    1. 通过分布式事务来处理数据库和缓存
    1. 通过订阅binlog异步更新缓存，且是串行运行

1. 先删除缓存再更新的问题
    删除缓存和更新数据库不是原子操作，在并发情况下会出现数据不一致问题
